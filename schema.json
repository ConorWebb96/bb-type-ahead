{
  "type": "component",
  "metadata": {},
  "schema": {
    "name": "bb-type-ahead",
    "friendlyName": "Type ahead",
    "description": "A custom component used for filtering selectable items whether that be relationships or general options.",
    "icon": "keyboard",
    "requiredAncestors": ["form"],
    "settings": [
      {
        "type": "table",
        "label": "Table",
        "key": "dataSource",
        "required": true
      },
      {
        "type": "text",
        "label": "Label",
        "key": "label"
      },
      {
        "type": "text",
        "label": "Placeholder",
        "key": "placeholder"
      },
      {
        "type": "select",
        "label": "Type",
        "key": "optionsType",
        "defaultValue": "fields",
        "placeholder": "Pick an options type",
        "options": [
          {
            "label": "Fields",
            "value": "fields"
          },
          {
            "label": "Relationship",
            "value": "relationship"
          },
          {
            "label": "Array",
            "value": "array"
          }
        ]
      },
      {
        "type": "field/link",
        "label": "Binded Field",
        "key": "relationship",
        "dependsOn": {
          "setting": "optionsType",
          "value": "relationship"
        },
        "required": true
      },
      {
        "type": "field/string",
        "label": "Binded Field",
        "key": "field",
        "dependsOn": {
          "setting": "optionsType",
          "value": "fields"
        },
        "required": true
      },
      {
        "type": "field/array",
        "label": "Binded Field",
        "key": "array",
        "dependsOn": {
          "setting": "optionsType",
          "value": "array"
        },
        "required": true
      },
      {
        "section": true,
        "name": "Configuration",
        "settings": [
          {
            "type": "number",
            "label": "Minimum search length",
            "key": "minSearchLength",
            "placeholder": "1",
            "defaultValue": 1
          },
          {
            "type": "boolean",
            "label": "Sort results",
            "key": "sort",
            "defaultValue": false
          },
          {
            "type": "select",
            "label": "Search Type",
            "key": "searchOptionsType",
            "defaultValue": "searchFields",
            "placeholder": "Pick an options type",
            "options": [
              {
                "label": "Fields",
                "value": "searchFields"
              },
              {
                "label": "Array",
                "value": "searchArray"
              }
            ]
          },
          {
            "type": "select",
            "label": "Filter Type",
            "key": "fieldFilters",
            "dependsOn": {
              "setting": "searchOptionsType",
              "value": "searchFields"
            },
            "options": [
              {
                "label": "Equals",
                "value": "string"
              },
              {
                "label": "Contains",
                "value": "fuzzy"
              }
            ],
            "defaultValue": "string"
          },
          {
            "type": "field/link",
            "label": "Search Field",
            "key": "searchRelationship",
            "dependsOn": {
              "setting": "searchOptionsType",
              "value": "searchRelationship"
            },
            "required": true
          },
          {
            "type": "field",
            "label": "Search Field",
            "key": "searchField",
            "dependsOn": {
              "setting": "searchOptionsType",
              "value": "searchFields"
            },
            "required": true
          },
          {
            "type": "field/array",
            "label": "Search Field",
            "key": "searchArray",
            "dependsOn": {
              "setting": "searchOptionsType",
              "value": "searchArray"
            },
            "required": true
          },
          {
            "type": "field",
            "label": "Label",
            "key": "labelColumn"
          },
          {
            "type": "field",
            "label": "Value",
            "key": "valueColumn"
          },
          {
            "type": "select",
            "label": "Display Mode",
            "key": "displayMode",
            "defaultValue": "simple",
            "options": [
              {
                "label": "Simple (text only)",
                "value": "simple"
              },
              {
                "label": "Rich (with image and email)",
                "value": "rich"
              }
            ]
          },
          {
            "type": "field",
            "label": "Image Field",
            "key": "imageColumn",
            "dependsOn": {
              "setting": "displayMode",
              "value": "rich"
            }
          },
          {
            "type": "field",
            "label": "Display Field", 
            "key": "emailColumn",
            "dependsOn": {
              "setting": "displayMode",
              "value": "rich"
            }
          },
          {
            "type": "number",
            "label": "Page Size",
            "key": "pageSize",
            "defaultValue": 25,
            "min": 5,
            "max": 100
          }
        ]
      },
      {
        "section": true,
        "name": "Actions",
        "settings": [
          {
            "type": "boolean",
            "label": "Disabled",
            "key": "disabled",
            "defaultValue": false
          },
          {
            "type": "event",
            "label": "On change",
            "key": "onChange",
            "context": [
              {
                "label": "Field Value",
                "key": "value"
              }
            ]
          },
          {
            "type": "validation/string",
            "label": "Validation",
            "key": "validation"
          }
        ]
      }
    ]
  }
}